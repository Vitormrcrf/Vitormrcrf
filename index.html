<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RIFA BRASIL - Sorteios</title>
  <script>
    const config = {
      premiumValue: 100,
      ticketValue: 10,
      winningNumber: null,
      reservedGroups: "[1] [2] [3] [4] [.5] [6] [7] [8] [9] [10] [11] [12] [13] [.14] [15] [16] [17] [.18] [19] [20] [21] [22] [23] [24] [25]",
      pixKey: "75991760055. João Vitor Pereira Gabriel",
      whatsappNumber: "5575991760055"
    };

    const animals = [
      "AVESTRUZ", "ÁGUIA", "BURRO", "BORBOLETA", "CACHORRO",
      "CABRA", "CARNEIRO", "CAMELO", "COBRA", "COELHO",
      "CAVALO", "ELEFANTE", "GALO", "GATO", "JACARÉ",
      "LEÃO", "MACACO", "PORCO", "PAVÃO", "PERU",
      "TOURO", "TIGRE", "URSO", "VEADO", "VACA"
    ];

    let selectedGroup = null;
    let generatedId = null;
  </script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;-webkit-tap-highlight-color:transparent;}
    body{background:radial-gradient(circle at top left,#0f2027,#203a43,#2c5364);min-height:100vh;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:white;}
    .container{width:100%;max-width:500px;background:#111827;border-radius:20px;padding:20px;box-shadow:0 0 25px rgba(0,255,255,0.2),0 0 40px rgba(0,0,0,0.6);overflow:hidden;position:relative;}
    .container::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#00f2fe,#4facfe,#00f2fe);box-shadow:0 0 20px cyan;}
    .header{text-align:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid rgba(255,255,255,0.2);}
    h1{color:#00f2fe;margin-bottom:8px;font-size:26px;text-transform:uppercase;letter-spacing:1.5px;text-shadow:0 0 8px #00f2fe,0 0 12px #4facfe;}
    .header p{color:#90caf9;font-weight:600;font-size:15px;}
    .welcome-message{background:linear-gradient(135deg,#1f2937,#111827);padding:15px;border-radius:12px;margin-bottom:20px;font-size:15px;line-height:1.5;border-left:5px solid #00f2fe;text-align:center;box-shadow:0 0 12px rgba(0,255,255,0.3);}
    .welcome-message p{margin:0;color:#e0f7fa;}
    .last-winner-btn{margin-top:10px;padding:10px 20px;background:linear-gradient(90deg,#4facfe,#00f2fe);color:#000;font-weight:bold;border:none;border-radius:25px;cursor:pointer;transition:all 0.3s;font-size:14px;box-shadow:0 0 10px cyan,0 0 20px #00f2fe;}
    .last-winner-btn:hover{transform:scale(1.05);box-shadow:0 0 20px #4facfe,0 0 40px cyan;}
    .prize-info{background:linear-gradient(145deg,#1f2937,#0d1117);padding:15px;border-radius:12px;margin-bottom:20px;text-align:center;border:2px dashed #00f2fe;position:relative;box-shadow:inset 0 0 20px rgba(0,255,255,0.2);}
    .prize-info h2{color:#4facfe;margin-bottom:8px;font-size:22px;text-shadow:0 0 8px cyan;}
    .prize-info p{color:#00f2fe;font-weight:600;}
    .blocks-container{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px;}
    .block{background:linear-gradient(145deg,#1f2937,#0d1117);border:2px solid #00f2fe;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:15px 5px;min-height:85px;transition:all 0.3s ease;cursor:pointer;position:relative;overflow:hidden;box-shadow:0 0 10px rgba(0,255,255,0.2);}
    .block:hover{transform:translateY(-5px) scale(1.05);box-shadow:0 0 25px cyan,0 0 40px #00f2fe;}
    .block-numbers{font-size:15px;font-weight:bold;margin-bottom:5px;text-align:center;color:#00f2fe;text-shadow:0 0 6px cyan;}
    .block-animal{font-size:12px;text-align:center;font-weight:600;color:#4facfe;}
    .block.reserved{background:linear-gradient(145deg,#2d0a0a,#1a0000);color:#fff;border-color:#ff1744;box-shadow:0 0 15px #ff1744,0 0 30px #ff1744;cursor:not-allowed;}
    .block.winner{background:linear-gradient(145deg,#2e7d32,#1b5e20);color:#fff;border-color:#66bb6a;box-shadow:0 0 20px #00e676,0 0 35px #00e676;animation:pulse 2s infinite;}
    @keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.07);}100%{transform:scale(1);}}
    .winner-section{background:linear-gradient(145deg,#1f2937,#0d1117);padding:15px;border-radius:12px;margin-top:20px;text-align:center;border-left:5px solid #00f2fe;box-shadow:0 0 20px rgba(0,255,255,0.25);}
    .winner-section h3{color:#4facfe;margin-bottom:10px;}
    .confirmation-section{margin-top:25px;padding:20px;background:linear-gradient(145deg,#0d1117,#1f2937);border-radius:12px;border-left:5px solid #00f2fe;display:none;text-align:center;box-shadow:0 0 20px rgba(0,255,255,0.25);}
    .confirmation-message{margin-bottom:20px;font-weight:bold;color:#e0f7fa;}
    .btn{padding:12px 25px;border:none;border-radius:10px;font-weight:bold;cursor:pointer;transition:all 0.3s;font-size:16px;min-width:100px;}
    .btn-yes{background:linear-gradient(90deg,#00f2fe,#4facfe);color:#000;box-shadow:0 0 15px cyan;}
    .btn-yes:hover{transform:scale(1.05);box-shadow:0 0 30px cyan;}
    .btn-no{background:linear-gradient(90deg,#ff1744,#ff5252);color:white;box-shadow:0 0 15px #ff1744;}
    .btn-no:hover{transform:scale(1.05);box-shadow:0 0 30px #ff5252;}
    .no-winner{font-style:italic;color:#b0bec5;}
    #winnerNumber{font-size:18px;color:#00f2fe;font-weight:bold;text-shadow:0 0 8px cyan;}
    .footer-note{text-align:center;margin-top:20px;color:#90caf9;font-size:14px;text-shadow:0 0 8px #00f2fe;}
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.85);z-index:1000;justify-content:center;align-items:center;}
    .modal-content{background-color:#111827;padding:20px;border-radius:12px;max-width:90%;max-height:90%;text-align:center;box-shadow:0 0 25px cyan;}
    .modal h2{color:#00f2fe;text-shadow:0 0 8px cyan;}
    .modal-img{max-width:100%;max-height:70vh;border-radius:10px;box-shadow:0 0 20px #00f2fe;}
    .close-modal{margin-top:15px;padding:10px 20px;background:linear-gradient(90deg,#4facfe,#00f2fe);color:black;border:none;border-radius:8px;cursor:pointer;font-weight:bold;box-shadow:0 0 15px cyan;}
    .close-modal:hover{transform:scale(1.05);box-shadow:0 0 30px cyan;}
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>RIFA RESPONSÁVEL VITOR</h1>
    <p>RESULTADO DO JOGO DO BICHO 19h - BA ASSIM QUE ENCHER</p>
  </div>
  
  <div class="welcome-message">
    <p><strong>Seja bem-vindo!</strong> Clique no grupo que deseja e em seguida escolha SIM ou NÃO para enviar e deixar reservado aqui na página. Obrigado a todos pela contribuição!</p>
    <button class="last-winner-btn" id="showWinnerBtn">Clique aqui para ver o último ganhador</button>
  </div>
  
  <div class="prize-info">
    <h2>Prêmio: R$ <span id="premiumValue"></span>,00</h2>
    <p>Valor por cota: R$ <span id="ticketValue"></span>,00</p>
  </div>
  
  <div class="blocks-container" id="blocksContainer"></div>
  
  <div class="winner-section">
    <h3>Número Sorteado</h3>
    <p><strong id="winnerNumber" class="no-winner">Aguardando sorteio...</strong></p>
  </div>
  
  <div class="confirmation-section" id="confirmationSection">
    <div class="confirmation-message" id="confirmationMessage"></div>
    <div class="confirmation-buttons">
      <button class="btn btn-yes" id="btnYes">Sim</button>
      <button class="btn btn-no" id="btnNo">Não</button>
    </div>
  </div>
</div>

<div class="modal" id="winnerModal">
  <div class="modal-content">
    <h2>Último Ganhador</h2>
    <img class="modal-img" src="https://i.ibb.co/2xzJH6f/Picsart-25-08-24-14-33-04-951.jpg" alt="Último ganhador da rifa">
    <button class="close-modal" id="closeModal">Fechar</button>
  </div>
</div>

<div class="footer-note">
  RIFA  © 2025 - Todos os direitos reservados mrc
</div>

<script>
function init() {
  document.getElementById("premiumValue").textContent = config.premiumValue;
  document.getElementById("ticketValue").textContent = config.ticketValue;
  generateBlocks();
  updateWinnerDisplay();
  document.getElementById("btnYes").addEventListener("click", confirmSelection);
  document.getElementById("btnNo").addEventListener("click", cancelSelection);
  document.getElementById("showWinnerBtn").addEventListener("click", showWinner);
  document.getElementById("closeModal").addEventListener("click", closeWinnerModal);
}

function parseReservedGroups(reservedString) {
  const reservedArray = [];
  const regex = /\[([^\]]*\.?[^\]]*)\]/g;
  let match;
  while ((match = regex.exec(reservedString)) !== null) {
    const content = match[1];
    if (content.includes('.')) {
      const numberMatch = content.match(/\d+/);
      if (numberMatch) {
        const number = parseInt(numberMatch[0]);
        if (!isNaN(number) && number >= 1 && number <= 25) reservedArray.push(number);
      }
    }
  }
  return reservedArray;
}

function generateBlocks() {
  const container = document.getElementById("blocksContainer");
  container.innerHTML = "";
  const reservedGroups = parseReservedGroups(config.reservedGroups);

  for (let i = 1; i <= 25; i++) {
    const block = document.createElement("div");
    block.className = "block";
    block.dataset.block = i;

    const startNum = (i - 1) * 4 + 1;
    const numbers = [];
    for (let j = 0; j < 4; j++) {
      let num = startNum + j;
      if (num > 100) num = num - 100;
      if (num === 100) num = 0;
      numbers.push(num.toString().padStart(2,"0"));
    }

    block.innerHTML = `<div class="block-numbers">${numbers.join("-")}</div><div class="block-animal">${animals[i-1]}</div>`;

    if (reservedGroups.includes(i)) block.classList.add("reserved");
    else block.addEventListener("click", ()=>{selectedGroup=i;generatedId=generateRandomId();showConfirmation(i,animals[i-1],numbers.join(", "),generatedId);});

    if (config.winningNumber!==null && config.winningNumber!=="") {
      let winningNumber = config.winningNumber===0?100:config.winningNumber;
      let groupNumber = winningNumber%4===0?winningNumber/4:Math.ceil(winningNumber/4);
      if (winningNumber===100) groupNumber=25;
      if (i===groupNumber) {block.classList.add("winner");block.classList.remove("reserved");}
    }
    container.appendChild(block);
  }
}

function showConfirmation(groupNumber, animalName, numbers, id) {
  const msg=`Tem certeza que deseja reservar o grupo ${groupNumber} (${animalName}) com os números ${numbers}? Seu ID de confirmação é: ${id}`;
  document.getElementById("confirmationMessage").textContent=msg;
  document.getElementById("confirmationSection").style.display="block";
  document.getElementById("confirmationSection").scrollIntoView({behavior:"smooth"});
}

function confirmSelection() {
  if (selectedGroup && generatedId) {
    const numbers = getNumbersForGroup(selectedGroup);
    const animalName = animals[selectedGroup-1];
    const idText=`GRUPO-${selectedGroup}-${animalName}-${generatedId}`;
    navigator.clipboard.writeText(idText);
    const message=encodeURIComponent(`Olá, gostaria de reservar o grupo ${selectedGroup} (${animalName})\nMeu ID de confirmação é: ${idText}\n\nChave PIX para pagamento:\n${config.pixKey}\n\naguardando o comprovante 🙏 acompanhe site aqui https://vitormrcrf.github.io/Vitormrcrf/`);
    window.open(`https://wa.me/${config.whatsappNumber}?text=${message}`,'_blank');
    document.getElementById("confirmationSection").style.display="none";
    selectedGroup=null;
    generatedId=null;
  }
}

function cancelSelection(){document.getElementById("confirmationSection").style.display="none";selectedGroup=null;generatedId=null;}

function getNumbersForGroup(groupNumber){
  const startNum=(groupNumber-1)*4+1;
  const numbers=[];
  for(let j=0;j<4;j++){
    let num=startNum+j;if(num>100)num=num-100;if(num===100)num=0;numbers.push(num.toString().padStart(2,"0"));
  }
  return numbers.join(", ");
}

function updateWinnerDisplay(){
  const winnerElement=document.getElementById("winnerNumber");
  if(config.winningNumber===null||config.winningNumber===""){winnerElement.textContent="Aguardando sorteio...";winnerElement.className="no-winner";return;}
  let winningNumber=config.winningNumber===0?100:config.winningNumber;
  let groupNumber=winningNumber%4===0?winningNumber/4:Math.ceil(winningNumber/4);
  if(winningNumber===100)groupNumber=25;
  const animalIndex=groupNumber>0&&groupNumber<=25?groupNumber-1:0;
  const displayNumber=config.winningNumber===0?"00":config.winningNumber.toString().padStart(2,"0");
  winnerElement.textContent=`${displayNumber} - ${animals[animalIndex]}`;
  winnerElement.className="";
}

function generateRandomId(length=6){const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let result="";for(let i=0;i<length;i++){result+=chars.charAt(Math.floor(Math.random()*chars.length));}return result;}

function showWinner(){document.getElementById('winnerModal').style.display='flex';}
function closeWinnerModal(){document.getElementById('winnerModal').style.display='none';}

document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>
